# California time
#### Задача
Print California time.
#### Решение
1. Установить переменную окружения
~~~
Переменные окружения - это переменные, установленные вне программы. Например, пользователем или ОС.
Бывают трех типов:
  1. Локальные переменные окружения.
  2. Пользовательские переменные (оболочки?) окружения.
  3. Системные переменные окружения.
~~~
etc/default/init - в моем случае переменные были здесь[^OS].

2. `setenv("TZ", "America/Tijuana", 1);` - устанавливает переменную в указанное значение. Алгоритм: ищет в environ строку с помощью strcmp, если не находит, то реалокейт и добавляет.
3. `(void)time(&now);` - получаем время с "эпохи" - 1970 (внутри системный вызов для получения gettimeofday, работаем с системный таймером).
4. `printf("%s", ctime(&now));` функция `ctime` раскрывается в `asctime (localtime(time))`.
~~~
localtime(time_t) конвертирует время в секундах в удобный и понятный человеку формат с учетом leap seconds,
leap years, учитывает все сложности с переводом времени. Смотрит на переменную TZ,
если она не установлена, считает по UTC, если есть, то ищет файл с временой зоной.
Расположение файлов(еще и значение по-умолчанию в glib): /usr/share/zoneinfo .
~~~
~~~
asctime (const struct tm *tp)
{
  return asctime_internal (tp, result, sizeof (result));
}
result представляет из себя static char на 114 символов. По своей сути просто распечатывает содержимое tp.
~~~
[^OS]: SunOs 5.11
